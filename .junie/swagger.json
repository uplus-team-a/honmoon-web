{"openapi":"3.1.0","info":{"title":"HonMoon API","description":"HonMoon API 문서","version":"v1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Mission Place","description":"미션 장소 관련 API"},{"name":"User Activity","description":"사용자 활동 관련 API"},{"name":"Raffle Product","description":"래플 상품 관련 API"},{"name":"Auth","description":"Google OAuth + DB 세션 인증 API"},{"name":"Mission Detail","description":"미션 상세 정보 관련 API"},{"name":"사용자","description":"사용자 관리 API"},{"name":"Raffle User Application","description":"래플 응모 관련 API"}],"paths":{"/api/users/me/profile-image":{"put":{"tags":["사용자"],"summary":"내 프로필 이미지 업데이트","description":"현재 로그인한 사용자의 프로필 이미지를 변경합니다.","operationId":"updateMyProfileImage","parameters":[{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"requestBody":{"description":"프로필 이미지 URL","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProfileImageRequest"}}},"required":true},"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyUserResponse"}}}}}}},"/api/user-activities":{"post":{"tags":["User Activity"],"summary":"활동 기록 생성","description":"사용자가 특정 장소에서 활동했을 때 활동 내역을 기록합니다. (userId당 placeId는 1개만 허용)","operationId":"createActivity","parameters":[{"name":"placeId","in":"query","description":"장소 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"description","in":"query","description":"활동 설명","required":true,"schema":{"type":"string"},"example":"한강공원에서 산책"},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserActivityResponse"},"examples":{"success":{"description":"success","value":{"placeId":10,"description":"한강공원에서 산책"}}}}}}}}},"/api/raffle-applications":{"post":{"tags":["Raffle User Application"],"summary":"래플 응모","description":"사용자가 특정 래플 상품에 응모합니다.","operationId":"applyRaffle","parameters":[{"name":"raffleProductId","in":"query","description":"래플 상품 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaffleUserApplicationResponse"},"examples":{"success":{"description":"success","value":{"raffleProductId":1}}}}}}}}},"/api/raffle-applications/{productId}/draw":{"post":{"tags":["Raffle User Application"],"summary":"래플 당첨자 선정","description":"관리자가 특정 래플 상품의 당첨자를 선정합니다.","operationId":"drawRaffleWinners","parameters":[{"name":"productId","in":"path","description":"래플 상품 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"winnerCount","in":"query","description":"당첨자 수","required":false,"schema":{"type":"integer","format":"int32"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListRaffleUserApplicationResponse"}}}}}}},"/api/raffle-applications/me":{"get":{"tags":["Raffle User Application"],"summary":"내 래플 응모 내역 조회","description":"현재 로그인한 사용자의 래플 응모 내역을 조회합니다.","operationId":"getMyRaffleApplications","parameters":[{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListRaffleUserApplicationResponse"}}}}}},"post":{"tags":["Raffle User Application"],"summary":"내 래플 응모","description":"현재 로그인한 사용자가 특정 래플 상품에 응모합니다.","operationId":"applyRaffleMe","parameters":[{"name":"raffleProductId","in":"query","description":"래플 상품 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyRaffleApplyResult"}}}}}}},"/api/missions/{id}/submit-quiz":{"post":{"tags":["Mission Detail"],"summary":"퀴즈 답변 제출 (통합)","description":"현재 로그인한 사용자가 미션 퀴즈 답변(텍스트/객관식/이미지)을 제출합니다.","operationId":"submitQuizAnswer","parameters":[{"name":"id","in":"path","description":"미션 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"textAnswer","in":"query","required":false,"schema":{"type":"string"}},{"name":"selectedChoiceIndex","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"uploadedImageUrl","in":"query","required":false,"schema":{"type":"string"}},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyUserActivityResponse"}}}}}}},"/api/missions/{id}/submit-quiz/me":{"post":{"tags":["Mission Detail"],"summary":"내 퀴즈 답변 제출 (통합)","description":"현재 로그인한 사용자가 미션 퀴즈 답변을 제출합니다.","operationId":"submitQuizAnswerMe","parameters":[{"name":"id","in":"path","description":"미션 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"textAnswer","in":"query","required":false,"schema":{"type":"string"}},{"name":"selectedChoiceIndex","in":"query","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"uploadedImageUrl","in":"query","required":false,"schema":{"type":"string"}},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyUserActivityResponse"}}}}}}},"/api/missions/{id}/submit-image-answer":{"post":{"tags":["Mission Detail"],"summary":"미션 이미지 답변 제출","description":"이미지 업로드 퀴즈 미션에 이미지를 제출합니다. 서버가 AI로 텍스트를 추출해 정답을 판별합니다.","operationId":"submitMissionImageAnswer","parameters":[{"name":"id","in":"path","description":"미션 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MissionImageAnswerRequest"}}},"required":true},"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyMissionAnswerResponse"}}}}}}},"/api/missions/{id}/submit-answer":{"post":{"tags":["Mission Detail"],"summary":"미션 답변 제출","description":"퀴즈 미션에 텍스트 답변을 제출합니다. 정답이면 포인트가 지급됩니다.","operationId":"submitMissionAnswer","parameters":[{"name":"id","in":"path","description":"미션 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MissionAnswerRequest"}}},"required":true},"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyMissionAnswerResponse"}}}}}}},"/api/missions/{id}/image/upload-url":{"post":{"tags":["Mission Detail"],"summary":"미션 이미지 업로드 URL 발급","description":"미션 관련 이미지를 버킷에 업로드하기 위한 Presigned URL을 발급합니다.","operationId":"createMissionImageUploadUrl","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fileName","in":"query","required":true,"schema":{"type":"string"}},{"name":"contentType","in":"query","required":false,"schema":{"type":"string"}},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyPresignedUrlResponse"}}}}}}},"/api/auth/test-token":{"post":{"tags":["Auth"],"summary":"테스트용 세션 토큰 발급 (Basic Auth)","description":"Basic 인증으로 호출 시 서버 세션 토큰(Bearer)을 발급합니다.","operationId":"issueTestToken","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyBasicTokenResponse"}}}}}}},"/api/auth/signup/email":{"post":{"tags":["Auth"],"summary":"이메일 회원가입 링크 전송","description":"입력된 이메일로 회원가입 확인 링크를 전송합니다.","operationId":"signupByEmail","parameters":[{"name":"redirectUrl","in":"query","description":"인증 성공 후 리다이렉트할 프론트엔드 URL","required":false,"schema":{"type":"string"},"example":"https://honmoon.site/auth/success"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailSignUpRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyEmailMagicLinkResponse"}}}}}}},"/api/auth/password/set":{"post":{"tags":["Auth"],"summary":"비밀번호 설정/변경","description":"세션 사용자에 대해 비밀번호를 설정하거나 변경합니다. (8자 이상)","operationId":"setPassword","parameters":[{"name":"principal","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetPasswordRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyLogoutResponse"}}}}}}},"/api/auth/logout":{"post":{"tags":["Auth"],"summary":"로그아웃","description":"서버 DB 세션을 무효화합니다.","operationId":"logout","parameters":[{"name":"Authorization","in":"header","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyLogoutResponse"}}}}}}},"/api/auth/login/email/password":{"post":{"tags":["Auth"],"summary":"이메일 ID/비밀번호 로그인","description":"이메일과 비밀번호로 로그인하여 세션 토큰을 발급합니다.","operationId":"loginWithEmailPassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailPasswordLoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyAuthLoginResponse"}}}}}}},"/api/auth/login/email/by-user":{"post":{"tags":["Auth"],"summary":"이메일 로그인 링크 전송(사용자 ID)","description":"프론트에서 이메일을 입력하지 않고 사용자 ID로 이메일을 조회하여 매직 링크를 전송합니다.","operationId":"loginByEmailByUser","parameters":[{"name":"redirectUrl","in":"query","description":"인증 성공 후 리다이렉트할 프론트엔드 URL","required":false,"schema":{"type":"string"},"example":"https://honmoon.site/auth/success"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailLoginByUserRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyEmailMagicLinkResponse"}}}}}}},"/api/auth/google/exchange":{"post":{"tags":["Auth"],"summary":"Google OAuth 코드 교환","description":"프론트 콜백에서 받은 code/state를 서버에 전달하여 세션 토큰을 발급받습니다.","operationId":"exchangeGoogleCode","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoogleCodeExchangeRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyAuthLoginResponse"}}}}}}},"/api/auth/email/exchange":{"post":{"tags":["Auth"],"summary":"이메일 매직 토큰 교환","description":"매직 토큰을 검증하고 세션 토큰을 JSON으로 반환합니다.","operationId":"exchangeEmailMagicToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/EmailMagicTokenExchangeRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyEmailCallbackResponse"}}}}}}},"/api/users/me":{"get":{"tags":["사용자"],"summary":"내 정보 조회","description":"현재 로그인한 사용자의 프로필을 조회합니다. Authorization: Bearer 토큰 필요.","operationId":"getMe","parameters":[{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyUserResponse"}}}}}},"patch":{"tags":["사용자"],"summary":"내 프로필 업데이트","description":"현재 로그인한 사용자의 닉네임/이미지를 수정합니다.","operationId":"updateMyProfile","parameters":[{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"requestBody":{"description":"수정할 사용자 정보","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}}},"required":true},"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyUserResponse"}}}}}}},"/favicon.ico":{"get":{"tags":["favicon-controller"],"operationId":"favicon","responses":{"200":{"description":"OK"}}}},"/api/users/me/profile/summary":{"get":{"tags":["사용자"],"summary":"내 프로필(간략)","description":"프로필, 포인트 요약, 최근 활동 10건, 최근 포인트 10건을 반환합니다.","operationId":"getMyProfileSummary","parameters":[{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyUserProfileSummaryResponse"}}}}}}},"/api/users/me/profile/detail":{"get":{"tags":["사용자"],"summary":"내 프로필(상세)","description":"프로필, 포인트 요약, 전체 활동 리스트, 전체 포인트 내역을 반환합니다.","operationId":"getMyProfileDetail","parameters":[{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyUserProfileDetailResponse"}}}}}}},"/api/user-activities/{id}":{"get":{"tags":["User Activity"],"summary":"사용자 활동 상세 조회","description":"특정 사용자 활동의 상세 정보를 조회합니다.","operationId":"getUserActivity","parameters":[{"name":"id","in":"path","description":"사용자 활동 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserActivityResponse"},"examples":{"success":{"description":"success","value":{"id":1,"userId":"123e4567-e89b-12d3-a456-426614174000","placeId":10,"description":"한강공원에서 산책","isCompleted":true,"pointsEarned":0}}}}}}}}},"/api/user-activities/place/{placeId}":{"get":{"tags":["User Activity"],"summary":"장소별 활동 내역 조회","description":"특정 장소에서 발생한 모든 활동 내역을 조회합니다.","operationId":"getActivityHistoryByPlace","parameters":[{"name":"placeId","in":"path","description":"장소 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListUserActivityResponse"}}}}}}},"/api/user-activities/me":{"get":{"tags":["User Activity"],"summary":"내 활동 내역 조회","description":"현재 로그인한 사용자의 활동 내역을 조회합니다.","operationId":"getMyActivityHistory","parameters":[{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListUserActivityResponse"}}}}}}},"/api/user-activities/me/recent":{"get":{"tags":["User Activity"],"summary":"내 최근 활동 조회","description":"현재 로그인한 사용자의 최근 활동 내역을 조회합니다.","operationId":"getMyRecentActivity","parameters":[{"name":"limit","in":"query","description":"조회할 활동 수","required":false,"schema":{"type":"integer","format":"int32"},"example":10},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListUserActivityResponse"}}}}}}},"/api/raffle-products":{"get":{"tags":["Raffle Product"],"summary":"래플 상품 목록 조회","description":"모든 래플 상품 목록을 조회합니다.","operationId":"getRaffleProducts","parameters":[{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RaffleProductResponse"}},"examples":{"success":{"description":"success","value":"[{\\n  \\\"id\\\": 1, \\n  \\\"name\\\": \\\"아이폰 15\\\"\\n}]"}}}}}}}},"/api/raffle-products/{id}":{"get":{"tags":["Raffle Product"],"summary":"래플 상품 상세 조회","description":"특정 래플 상품의 상세 정보를 조회합니다.","operationId":"getRaffleProduct","parameters":[{"name":"id","in":"path","description":"래플 상품 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaffleProductResponse"},"examples":{"success":{"description":"success","value":{"id":1,"name":"아이폰 15","description":"최신 스마트폰","imageUrl":"https://.../iphone.jpg","createdAt":"2024-05-01T12:00:00Z"}}}}}}}}},"/api/raffle-products/{id}/applicants-count":{"get":{"tags":["Raffle Product"],"summary":"래플 상품 응모자 수 조회","description":"특정 래플 상품에 응모한 사용자 수를 조회합니다.","operationId":"getApplicantsCount","parameters":[{"name":"id","in":"path","description":"래플 상품 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"application/json":{"schema":{"type":"string"},"examples":{"success":{"description":"success","value":"{\\n  \\\"applicantsCount\\\": 42\\n}"}}}}}}}},"/api/raffle-products/search":{"get":{"tags":["Raffle Product"],"summary":"래플 상품 검색","description":"상품명으로 래플 상품을 검색합니다.","operationId":"searchRaffleProducts","parameters":[{"name":"name","in":"query","description":"검색할 상품명","required":true,"schema":{"type":"string"},"example":"아이폰"},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListRaffleProductResponse"}}}}}}},"/api/raffle-products/by-points":{"get":{"tags":["Raffle Product"],"summary":"포인트별 래플 상품 조회","description":"특정 포인트 범위의 래플 상품들을 조회합니다.","operationId":"getRaffleProductsByPoints","parameters":[{"name":"minPoints","in":"query","description":"최소 포인트","required":true,"schema":{"type":"integer","format":"int32"},"example":100},{"name":"maxPoints","in":"query","description":"최대 포인트","required":true,"schema":{"type":"integer","format":"int32"},"example":1000},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListRaffleProductResponse"}}}}}}},"/api/raffle-applications/{id}":{"get":{"tags":["Raffle User Application"],"summary":"래플 응모 상세 조회","description":"특정 래플 응모의 상세 정보를 조회합니다.","operationId":"getRaffleUserApplication","parameters":[{"name":"id","in":"path","description":"래플 응모 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RaffleUserApplicationResponse"},"examples":{"success":{"description":"success","value":{"id":1,"userId":"123e4567-e89b-12d3-a456-426614174000","raffleProductId":1,"applicationDate":"2024-05-01T12:00:00Z"}}}}}}}}},"/api/raffle-applications/product/{productId}":{"get":{"tags":["Raffle User Application"],"summary":"래플 상품별 응모자 목록 조회","description":"특정 래플 상품에 응모한 모든 사용자 목록을 조회합니다.","operationId":"getRaffleApplicationsByProduct","parameters":[{"name":"productId","in":"path","description":"래플 상품 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListRaffleUserApplicationResponse"}}}}}}},"/api/raffle-applications/me/product/{productId}":{"get":{"tags":["Raffle User Application"],"summary":"내 응모 상태 조회","description":"현재 로그인한 사용자가 특정 래플 상품에 응모했는지 확인합니다.","operationId":"getMyApplicationStatus","parameters":[{"name":"productId","in":"path","description":"래플 상품 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":true,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyRaffleUserApplicationResponse"}}}}}}},"/api/missions/{id}":{"get":{"tags":["Mission Detail"],"summary":"미션 상세 정보 조회","description":"특정 미션의 상세 정보를 조회합니다.","operationId":"getMissionDetail","parameters":[{"name":"id","in":"path","description":"미션 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MissionDetailResponse"}}}}}}},"/api/missions/{id}/detail":{"get":{"tags":["Mission Detail"],"summary":"미션 상세 정보 조회(별칭)","description":"특정 미션의 상세 정보를 조회합니다. 기존 경로와 동일한 응답을 반환합니다.","operationId":"getMissionDetailAlias","parameters":[{"name":"id","in":"path","description":"미션 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MissionDetailResponse"}}}}}}},"/api/mission-places":{"get":{"tags":["Mission Place"],"summary":"미션 장소 목록 조회","description":"모든 미션 장소 목록을 조회합니다.","operationId":"getMissionPlaces","parameters":[{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListMissionPlaceWithMissionsResponse"}}}}}}},"/api/mission-places/{id}":{"get":{"tags":["Mission Place"],"summary":"미션 장소 상세 조회","description":"특정 미션 장소의 상세 정보를 조회합니다.","operationId":"getMissionPlace","parameters":[{"name":"id","in":"path","description":"미션 장소 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyMissionPlaceResponse"}}}}}}},"/api/mission-places/{id}/missions":{"get":{"tags":["Mission Place"],"summary":"미션 장소별 미션 목록 조회","description":"특정 미션 장소에 속한 모든 미션 목록을 조회합니다.","operationId":"getMissionsByPlace","parameters":[{"name":"id","in":"path","description":"미션 장소 ID","required":true,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListMissionDetailResponse"}}}}}}},"/api/mission-places/search":{"get":{"tags":["Mission Place"],"summary":"미션 장소 검색","description":"장소명으로 미션 장소를 검색합니다.","operationId":"searchMissionPlaces","parameters":[{"name":"title","in":"query","description":"검색할 장소명","required":true,"schema":{"type":"string"},"example":"한강공원"},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListMissionPlaceWithMissionsResponse"}}}}}}},"/api/mission-places/nearby":{"get":{"tags":["Mission Place"],"summary":"근처 미션 장소 조회","description":"사용자 위치 기준으로 근처의 미션 장소들을 조회합니다.","operationId":"getNearbyMissionPlaces","parameters":[{"name":"lat","in":"query","description":"사용자 위도","required":true,"schema":{"type":"number","format":"double"},"example":37.5665},{"name":"lng","in":"query","description":"사용자 경도","required":true,"schema":{"type":"number","format":"double"},"example":126.978},{"name":"radius","in":"query","description":"검색 반경 (미터)","required":false,"schema":{"type":"integer","format":"int32"},"example":1000},{"name":"currentUser","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResponseBodyListMissionPlaceWithMissionsResponse"}}}}}}},"/api/auth/me":{"get":{"tags":["Auth"],"summary":"현재 사용자 프로필","description":"Basic 인증 또는 Bearer 세션 토큰으로 호출 시 현재 인증된 프로필을 반환합니다.","operationId":"me","parameters":[{"name":"principal","in":"query","required":false,"schema":{"$ref":"#/components/schemas/UserPrincipal"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProfileResponse"}}}}}}},"/api/auth/google/url":{"get":{"tags":["Auth"],"summary":"Google OAuth 인증 URL 생성","description":"프론트는 이 URL로 리다이렉트합니다. state는 위변조 방지를 위한 서명 값을 포함합니다.","operationId":"getGoogleAuthUrl","parameters":[{"name":"scope","in":"query","description":"스코프 목록 공백 구분","required":false,"schema":{"type":"string","default":"profile email openid"},"example":"openid email profile"},{"name":"redirectAfter","in":"query","description":"인증 성공 후 프론트에서 이동할 경로","required":false,"schema":{"type":"string"},"example":"/"},{"name":"frontendCallbackUrl","in":"query","description":"프론트 콜백 URL (코드/상태를 넘길 경로)","required":false,"schema":{"type":"string"},"example":"https://honmoon.site/auth/google/callback"}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthUrlResponse"}}}}}}},"/api/auth/google/callback":{"get":{"tags":["Auth"],"summary":"Google OAuth 콜백","description":"구글에서 전달한 code/state로 토큰을 교환하고 사용자 정보를 조회한 뒤, 서버 DB 세션 토큰을 발급합니다.","operationId":"googleCallback","parameters":[{"name":"code","in":"query","description":"구글이 전달하는 인증 코드","required":true,"schema":{"type":"string"}},{"name":"state","in":"query","description":"요청 시 생성된 state","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"성공","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthLoginResponse"}}}},"400":{"description":"state 검증 실패 또는 파라미터 오류"}}}},"/api/auth/email/callback":{"get":{"tags":["Auth"],"summary":"이메일 매직 링크 콜백","description":"매직 토큰을 검증합니다.","operationId":"magicLinkCallback","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string"}},{"name":"purpose","in":"query","required":false,"schema":{"type":"string"}},{"name":"redirectUrl","in":"query","description":"인증 성공 후 리다이렉트할 프론트엔드 URL","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"UpdateProfileImageRequest":{"type":"object","properties":{"imageUrl":{"type":"string"}},"required":["imageUrl"]},"UserPrincipal":{"type":"object","properties":{"subject":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"picture":{"type":"string"},"provider":{"type":"string"},"roles":{"type":"array","items":{"type":"string"},"uniqueItems":true}},"required":["provider","roles","subject"]},"ResponseBodyUserResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/UserResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"UserResponse":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"email":{"type":"string"},"nickname":{"type":"string"},"totalPoints":{"type":"integer","format":"int32"},"totalActivities":{"type":"integer","format":"int32"},"profileImageUrl":{"type":"string"},"isActive":{"type":"boolean"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"}},"required":["createdAt","id","isActive","modifiedAt","totalActivities","totalPoints"]},"AnswerCheckResult":{"type":"object","properties":{"isCorrect":{"type":"boolean"},"confidence":{"type":"number","format":"double"},"reasoning":{"type":"string"},"extractedText":{"type":"string"},"hint":{"type":"string"}},"required":["confidence","isCorrect","reasoning"]},"UserActivityResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"string","format":"uuid"},"placeId":{"type":"integer","format":"int64"},"missionId":{"type":"integer","format":"int64"},"description":{"type":"string"},"isCorrect":{"type":"boolean"},"isCompleted":{"type":"boolean"},"pointsEarned":{"type":"integer","format":"int32"},"textAnswer":{"type":"string"},"selectedChoiceIndex":{"type":"integer","format":"int32"},"uploadedImageUrl":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"},"aiResult":{"$ref":"#/components/schemas/AnswerCheckResult"},"alreadyExists":{"type":"boolean"}},"required":["alreadyExists","createdAt","id","isCompleted","modifiedAt","placeId","pointsEarned","userId"]},"RaffleUserApplicationResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"string","format":"uuid"},"raffleProductId":{"type":"integer","format":"int64"},"applicationDate":{"type":"string","format":"date-time"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"}},"required":["applicationDate","createdAt","id","modifiedAt","raffleProductId","userId"]},"ResponseBodyListRaffleUserApplicationResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/RaffleUserApplicationResponse"}},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"RaffleApplyResult":{"type":"object","properties":{"success":{"type":"boolean"},"reasonCode":{"type":"string"},"requiredPoints":{"type":"integer","format":"int32"},"currentPoints":{"type":"integer","format":"int32"},"application":{"$ref":"#/components/schemas/RaffleUserApplicationResponse"}},"required":["success"]},"ResponseBodyRaffleApplyResult":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/RaffleApplyResult"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"ResponseBodyUserActivityResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/UserActivityResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"MissionImageAnswerRequest":{"type":"object","properties":{"imageUrl":{"type":"string"}},"required":["imageUrl"]},"MissionAnswerResponse":{"type":"object","properties":{"isCorrect":{"type":"boolean"},"pointsEarned":{"type":"integer","format":"int32"},"explanation":{"type":"string"},"hint":{"type":"string"},"aiResult":{"$ref":"#/components/schemas/AnswerCheckResult"}},"required":["isCorrect","pointsEarned"]},"ResponseBodyMissionAnswerResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/MissionAnswerResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"MissionAnswerRequest":{"type":"object","properties":{"answer":{"type":"string"}},"required":["answer"]},"PresignedUrlResponse":{"type":"object","properties":{"uploadUrl":{"type":"string"},"fileName":{"type":"string"},"expiresAt":{"type":"string","format":"date-time"}},"required":["expiresAt","fileName","uploadUrl"]},"ResponseBodyPresignedUrlResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/PresignedUrlResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"BasicTokenResponse":{"type":"object","properties":{"token":{"type":"string"},"expiresAt":{"type":"string","format":"date-time"}},"required":["expiresAt","token"]},"ResponseBodyBasicTokenResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/BasicTokenResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"EmailSignUpRequest":{"type":"object","properties":{"email":{"type":"string"},"name":{"type":"string"}},"required":["email","name"]},"EmailMagicLinkResponse":{"type":"object","properties":{"email":{"type":"string"},"magicLink":{"type":"string"},"expiresAt":{"type":"string","format":"date-time"}},"required":["email","expiresAt","magicLink"]},"ResponseBodyEmailMagicLinkResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/EmailMagicLinkResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"SetPasswordRequest":{"type":"object","properties":{"password":{"type":"string"}},"required":["password"]},"LogoutResponse":{"type":"object","properties":{"success":{"type":"boolean"}},"required":["success"]},"ResponseBodyLogoutResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/LogoutResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"EmailPasswordLoginRequest":{"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"required":["email","password"]},"AuthLoginResponse":{"type":"object","properties":{"provider":{"type":"string"},"google":{"$ref":"#/components/schemas/GoogleUserInfo"},"googleTokens":{"$ref":"#/components/schemas/GoogleTokenResponse"},"appSessionToken":{"type":"string"},"jwt":{"$ref":"#/components/schemas/JwtTokenResponse"}},"required":["provider"]},"GoogleTokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"idToken":{"type":"string"},"refreshToken":{"type":"string"},"expiresInSeconds":{"type":"integer","format":"int64"},"scope":{"type":"string"},"tokenType":{"type":"string"}},"required":["accessToken","expiresInSeconds","tokenType"]},"GoogleUserInfo":{"type":"object","properties":{"sub":{"type":"string"},"email":{"type":"string"},"emailVerified":{"type":"boolean"},"name":{"type":"string"},"givenName":{"type":"string"},"familyName":{"type":"string"},"picture":{"type":"string"}},"required":["sub"]},"JwtTokenResponse":{"type":"object","properties":{"accessToken":{"type":"string"},"refreshToken":{"type":"string"},"accessTokenExpiresAt":{"type":"string","format":"date-time"},"refreshTokenExpiresAt":{"type":"string","format":"date-time"},"tokenType":{"type":"string"}},"required":["accessToken","accessTokenExpiresAt","refreshToken","refreshTokenExpiresAt","tokenType"]},"ResponseBodyAuthLoginResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/AuthLoginResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"EmailLoginByUserRequest":{"type":"object","properties":{"userId":{"type":"string","format":"uuid"}},"required":["userId"]},"GoogleCodeExchangeRequest":{"type":"object","properties":{"code":{"type":"string"},"state":{"type":"string"}},"required":["code","state"]},"EmailMagicTokenExchangeRequest":{"type":"object","properties":{"token":{"type":"string"},"purpose":{"type":"string"}},"required":["token"]},"EmailCallbackResponse":{"type":"object","properties":{"email":{"type":"string"},"isValid":{"type":"boolean"},"appSessionToken":{"type":"string"}},"required":["email","isValid"]},"ResponseBodyEmailCallbackResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/EmailCallbackResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"UpdateUserRequest":{"type":"object","properties":{"nickname":{"type":"string"},"profileImageUrl":{"type":"string"}}},"PointHistoryResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"userId":{"type":"string","format":"uuid"},"points":{"type":"integer","format":"int32"},"description":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"}},"required":["createdAt","description","id","modifiedAt","points","userId"]},"ResponseBodyUserProfileSummaryResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/UserProfileSummaryResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"UserProfileSummaryResponse":{"type":"object","properties":{"profile":{"$ref":"#/components/schemas/UserResponse"},"pointsSummary":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}},"recentActivities":{"type":"array","items":{"$ref":"#/components/schemas/UserActivityResponse"}},"recentPointHistory":{"type":"array","items":{"$ref":"#/components/schemas/PointHistoryResponse"}}},"required":["pointsSummary","profile","recentActivities","recentPointHistory"]},"ResponseBodyUserProfileDetailResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/UserProfileDetailResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"UserProfileDetailResponse":{"type":"object","properties":{"profile":{"$ref":"#/components/schemas/UserResponse"},"pointsSummary":{"type":"object","additionalProperties":{"type":"integer","format":"int32"}},"activities":{"type":"array","items":{"$ref":"#/components/schemas/UserActivityResponse"}},"pointHistory":{"type":"array","items":{"$ref":"#/components/schemas/PointHistoryResponse"}}},"required":["activities","pointHistory","pointsSummary","profile"]},"ResponseBodyListUserActivityResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/UserActivityResponse"}},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"RaffleProductResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"imageUrl":{"type":"string"},"pointCost":{"type":"integer","format":"int32"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"}},"required":["createdAt","id","modifiedAt","name","pointCost"]},"ResponseBodyListRaffleProductResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/RaffleProductResponse"}},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"ResponseBodyRaffleUserApplicationResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/RaffleUserApplicationResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"MissionChoicesVo":{"type":"object","properties":{"choices":{"type":"array","items":{"type":"string"}}},"required":["choices"]},"MissionDetailResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"title":{"type":"string"},"description":{"type":"string"},"points":{"type":"integer","format":"int32"},"missionType":{"type":"string","enum":["QUIZ_MULTIPLE_CHOICE","QUIZ_TEXT_INPUT","QUIZ_IMAGE_UPLOAD","PLACE_VISIT","PHOTO_UPLOAD","SURVEY"]},"placeId":{"type":"integer","format":"int64"},"question":{"type":"string"},"answer":{"type":"string"},"choices":{"$ref":"#/components/schemas/MissionChoicesVo"},"answerExplanation":{"type":"string"},"correctImageUrl":{"type":"string"},"imageUploadInstruction":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"}},"required":["createdAt","id","missionType","modifiedAt","points","title"]},"MissionPlaceWithMissionsResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"location":{"type":"string"},"image":{"type":"string"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"},"missions":{"type":"array","items":{"$ref":"#/components/schemas/MissionDetailResponse"}}},"required":["createdAt","id","missions","modifiedAt","name"]},"ResponseBodyListMissionPlaceWithMissionsResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/MissionPlaceWithMissionsResponse"}},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"MissionPlaceResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"description":{"type":"string"},"location":{"type":"string"},"image":{"type":"string"},"latitude":{"type":"number","format":"double"},"longitude":{"type":"number","format":"double"},"createdAt":{"type":"string","format":"date-time"},"modifiedAt":{"type":"string","format":"date-time"}},"required":["createdAt","id","modifiedAt","name"]},"ResponseBodyMissionPlaceResponse":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/MissionPlaceResponse"},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"ResponseBodyListMissionDetailResponse":{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/MissionDetailResponse"}},"status":{"type":"integer","format":"int32"},"message":{"type":"string"}},"required":["message","status"]},"ProfileResponse":{"type":"object","properties":{"sub":{"type":"string"},"email":{"type":"string"},"name":{"type":"string"},"picture":{"type":"string"},"provider":{"type":"string"}},"required":["provider","sub"]},"AuthUrlResponse":{"type":"object","properties":{"provider":{"type":"string"},"authorizationUrl":{"type":"string"},"state":{"type":"string"}},"required":["authorizationUrl","provider","state"]}}}}